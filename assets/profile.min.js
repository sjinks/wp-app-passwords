jQuery(function(e){function s(e,s){p.find("div.notice").remove(),r.before(u({type:e,message:s}))}function a(e,a,p){s("error",p?wwAppPass.ajaxError2+p:wwAppPass.ajaxError)}var p=e("#ww-app-passwords"),n=p.find("#ww-app-pass-name"),o=p.find("#ww-add-new-pass-btn"),r=p.find("#create-new-app-pass"),t=p.find("#ww-app-passwords-table"),w=t.find("#ww-app-pass-revoke-all"),d=t.find("tbody"),i=d.find("tr.no-items"),c=e("#user_id").val(),l=doT.template(e("#tmpl-ww-new-app-pass").text()),f=doT.template(e("#tmpl-ww-app-pass-row").text()),u=doT.template(e("#tmpl-ww-app-pass-msg").text());o.click(function(s){s.preventDefault();var p=n.val();p.length?(n.prop("disabled",!0),o.prop("disabled",!0),e.ajax({url:wwAppPass.rest_base+c,method:"POST",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",wwAppPass.nonce)},data:{name:p}}).done(function(e,s,a){wwAppPass.nonce=a.getResponseHeader("X-WP-Nonce"),n.prop("disabled",!1),o.prop("disabled",!1),r.after(l({name:p,password:e.password})),d.prepend(f(e.row)),n.val(""),i.remove(),t.show()}).fail(a)):n.focus()}),d.on("click",".revoke button",function(p){if(p.preventDefault(),confirm(wwAppPass.revoke)){var n=e(p.target),o=n.closest("tr"),r=n.data("slug");e.ajax({url:wwAppPass.rest_base+c+"/"+r,method:"DELETE",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",wwAppPass.nonce)}}).done(function(e,a,p){wwAppPass.nonce=p.getResponseHeader("X-WP-Nonce"),e?(o.siblings().length||t.hide(),o.remove(),s("success",wwAppPass.revokeOK)):s("error",wwAppPass.revokeError)}).fail(a)}}),w.click(function(p){p.preventDefault(),confirm(wwAppPass.revokeAll)&&e.ajax({url:wwAppPass.rest_base+c,method:"DELETE",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",wwAppPass.nonce)}}).done(function(e,a,p){wwAppPass.nonce=p.getResponseHeader("X-WP-Nonce"),parseInt(e,10)>0?(d.children().remove(),t.hide(),s("success",wwAppPass.revokeAllOK)):s("error",wwAppPass.revokeAllError)}).fail(a)}),e(document).on("click",".ww-app-pass-modal-dismiss",function(s){s.preventDefault(),e(".new-application-password.notification-dialog-wrap").hide()}),i.length>0&&t.hide()});
//# sourceMappingURL=profile.min.js.map
